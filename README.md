# Mediator
Simple mediator implementation in Go.

## Installation
```bash
go get github.com/oli4maes/mediator
```

## Usage
An example of how to use the request/response pattern with the appropriate mediator handler.
These files can be generated by [mediator-tools](https://github.com/oli4maes/mediator-tools).

### Request
```go
// CreateProduct Request
type Request struct {
	Name        string
	Description string
}
```

### Response
```go
// CreateProduct Response
type Response struct {
	ProductID   uuid.UUID
	Name        string
	Description string
}
```

### Handler
```go
// Register createProductHandler
func init() {
	repo := NewProductRepo()
	
	err := mediator.Register[Request, Response](handler{repo: repo})
	if err != nil {
        panic (err)
    }
}

// handler is the mediator handler, all dependencies should be added here
type handler struct {
	repo ProductRepo
}

func (h handler) Handle(ctx context.Context, request Request) (Response, error) {
	product := Product {
	    ProductID: 	 uuid.New(),
		Name:        request.Name,
        Description: request.Description,
    }
	
	createdProduct, err := h.repo.Create(ctx, product)
	if err != nil {
		return  Response{}, err
    }
	
	return Response {
		ProductID:   createdProduct.ProductID,
		Name:        createdProduct.Name,
		Description: createdProduct.Description,
    }, nil   
}

```